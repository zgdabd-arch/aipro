{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/ai-tutoring-tool.ts"],"sourcesContent":["\n'use server';\n\n/**\n * @fileOverview AI-powered tutoring tool that provides personalized explanations and examples based on the student's study plan and conversation history.\n *\n * - aiTutoringTool - A function that offers AI-powered assistance.\n * - AiTutoringToolInput - The input type for the aiTutoringTool function.\n * - AiTutoringToolOutput - The return type for the aiTutoringTool function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\nimport { textToSpeech } from './tts-flow';\n\nconst ChatMessageSchema = z.object({\n  role: z.enum(['user', 'model']),\n  content: z.string(),\n});\n\nconst AiTutoringToolInputSchema = z.object({\n  studentName: z.string().describe('The name of the student.'),\n  gradeLevel: z.string().describe('The grade level of the student.'),\n  country: z.string().describe('The country of the student.'),\n  preferredLearningLanguage: z\n    .string()\n    .describe('The preferred language for learning.'),\n  subject: z.string().describe('The subject the student wants to improve in.'),\n  topic: z.string().describe('The specific topic for the current study session. Can be \"General Question\" if no specific topic is scheduled.'),\n  studyPlan: z.string().optional().describe('The overall study plan for the student. Use this for broad context.'),\n  fileDataUri: z.string().optional().describe(\n    \"An optional file (image or document) provided by the student, as a data URI. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n  ),\n  history: z.array(ChatMessageSchema).describe('The conversation history between the user and the model.'),\n  question: z.string().describe('The latest question from the student.'),\n});\nexport type AiTutoringToolInput = z.infer<typeof AiTutoringToolInputSchema>;\n\nconst AiTutoringToolOutputSchema = z.object({\n  explanation: z\n    .string()\n    .describe(\n      'A personalized explanation of the topic, tailored to the student and their study plan.'\n    ),\n  example: z\n    .string()\n    .describe(\n      'A relevant example to illustrate the topic, customized for the student and their study plan.'\n    ),\n  explanationAudio: z\n    .string()\n    .describe('The audio data URI for the explanation.'),\n  exampleAudio: z\n    .string()\n    .describe('The audio data URI for the example.'),\n});\nexport type AiTutoringToolOutput = z.infer<typeof AiTutoringToolOutputSchema>;\n\nexport async function aiTutoringTool(\n  input: AiTutoringToolInput\n): Promise<AiTutoringToolOutput> {\n  return aiTutoringToolFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'aiTutoringToolPrompt',\n  input: {schema: z.object({\n    isGeneralQuestion: z.boolean(),\n    studentName: z.string(),\n    gradeLevel: z.string(),\n    country: z.string(),\n    preferredLearningLanguage: z.string(),\n    subject: z.string(),\n    topic: z.string(),\n    studyPlan: z.string().optional(),\n    fileDataUri: z.string().optional(),\n    history: z.array(ChatMessageSchema),\n    question: z.string(),\n  })},\n  output: {schema: z.object({\n      explanation: z.string().describe(\n        'A personalized explanation of the topic, tailored to the student and their study plan.'\n      ),\n      example: z.string().describe(\n        'A relevant example to illustrate the topic, customized for the student and their study plan.'\n      ),\n  })},\n  prompt: `You are an AI Professor specializing in personalized education.\n\n  {{#if isGeneralQuestion}}\n  You are in a general session. The student does not have a specific topic scheduled. Your goal is to be a helpful academic assistant. Answer the student's question clearly and provide a relevant example. Tailor your response to the student's profile.\n  {{else}}\n  You are in a focused lesson. Your primary goal is to provide a clear explanation and a relevant example for the student's current topic: \"{{{topic}}}\". **Crucially, you MUST focus your response on this specific topic.**\n  {{/if}}\n\n  Tailor the explanation and example to the student's specific needs, considering their profile and question.\n\n  {{#if fileDataUri}}\n  The student has uploaded a file with their latest question. You MUST analyze the contents of this file and use it as the primary context for your answer, relating it back to the main topic if one is active.\n  File: {{media url=fileDataUri}}\n  {{/if}}\n  \n  You must consider the conversation history to provide context and ensure your answer helps them progress. The overall study plan is for broad context.\n\n  Student Details:\n  - Name: {{{studentName}}}\n  - Grade Level: {{{gradeLevel}}}\n  - Country: {{{country}}}\n  - Preferred Language: {{{preferredLearningLanguage}}}\n\n  Current Lesson Details:\n  - Subject: {{{subject}}}\n  - Topic: {{{topic}}}\n\n  {{#if studyPlan}}\n  Overall Study Plan Context (for reference):\n  ---\n  {{{studyPlan}}}\n  ---\n  {{/if}}\n\n  Conversation History:\n  {{#each history}}\n    {{#if (eq this.role 'user')}}\n      Student: {{{this.content}}}\n    {{else}}\n      Professor: {{{this.content}}}\n    {{/if}}\n  {{/each}}\n\n  Latest Student Question: {{{question}}}\n\n  Based on all this information, provide a clear explanation and a relevant example for the student's question.\n  `,\n});\n\nconst aiTutoringToolFlow = ai.defineFlow(\n  {\n    name: 'aiTutoringToolFlow',\n    inputSchema: AiTutoringToolInputSchema,\n    outputSchema: AiTutoringToolOutputSchema,\n  },\n  async (input) => {\n    // Step 1: Get the text-based explanation and example from the main prompt.\n    const { output: textOutput } = await prompt({\n        ...input,\n        isGeneralQuestion: input.topic === 'General Question',\n    });\n    if (!textOutput) {\n      throw new Error('Failed to get a text response from the AI.');\n    }\n\n    // Step 2: Concurrently generate audio for both the explanation and the example.\n    const [explanationAudioResult, exampleAudioResult] = await Promise.all([\n        textToSpeech(textOutput.explanation),\n        textToSpeech(textOutput.example)\n    ]);\n\n    if (!explanationAudioResult || !exampleAudioResult) {\n        throw new Error('Failed to generate audio for the explanation or example.');\n    }\n\n    // Step 3: Combine the text output with the generated audio URIs into the final response.\n    return {\n      explanation: textOutput.explanation,\n      example: textOutput.example,\n      explanationAudio: explanationAudioResult.audio,\n      exampleAudio: exampleAudioResult.audio,\n    };\n  }\n);\n"],"names":[],"mappings":";;;;;;IA0DsB,iBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/services/progress.ts"],"sourcesContent":["\n'use client';\n\nimport { addDoc, collection, doc, Firestore, serverTimestamp } from 'firebase/firestore';\nimport { errorEmitter } from '@/firebase/error-emitter';\nimport { FirestorePermissionError } from '@/firebase/errors';\nimport { differenceInMinutes } from 'date-fns';\n\ninterface UpdateProgressParams {\n    firestore: Firestore;\n    userId: string;\n    studentProfileId: string;\n    studyPlanId: string;\n    studySessionId: string;\n    sessionStartTime: Date;\n}\n\nexport function updateProgress({\n    firestore,\n    userId,\n    studentProfileId,\n    studyPlanId,\n    studySessionId,\n    sessionStartTime,\n}: UpdateProgressParams): void {\n    const now = new Date();\n    \n    // Calculate duration in minutes\n    const duration = differenceInMinutes(now, sessionStartTime);\n\n    // Prepare progress data\n    const progressData = {\n        studyPlanId: studyPlanId,\n        studySessionId: studySessionId,\n        date: serverTimestamp(),\n        duration: duration > 0 ? duration : 1, // Log at least 1 minute\n    };\n\n    // Get a reference to the progress subcollection\n    const progressCollectionRef = collection(\n        firestore,\n        `users/${userId}/studentProfiles/${studentProfileId}/studyPlans/${studyPlanId}/progress`\n    );\n\n    // Add the new progress document (non-blocking)\n    addDoc(progressCollectionRef, progressData)\n        .catch(error => {\n            console.error(\"Error saving progress:\", error);\n            const permissionError = new FirestorePermissionError({\n                path: progressCollectionRef.path,\n                operation: 'create',\n                requestResourceData: progressData,\n            });\n            errorEmitter.emit('permission-error', permissionError);\n        });\n}\n"],"names":[],"mappings":";;;AAGA;AAAA;AACA;AACA;AACA;AALA;;;;;AAgBO,SAAS,eAAe,EAC3B,SAAS,EACT,MAAM,EACN,gBAAgB,EAChB,WAAW,EACX,cAAc,EACd,gBAAgB,EACG;IACnB,MAAM,MAAM,IAAI;IAEhB,gCAAgC;IAChC,MAAM,WAAW,CAAA,GAAA,sJAAA,CAAA,sBAAmB,AAAD,EAAE,KAAK;IAE1C,wBAAwB;IACxB,MAAM,eAAe;QACjB,aAAa;QACb,gBAAgB;QAChB,MAAM,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;QACpB,UAAU,WAAW,IAAI,WAAW;IACxC;IAEA,gDAAgD;IAChD,MAAM,wBAAwB,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EACnC,WACA,CAAC,MAAM,EAAE,OAAO,iBAAiB,EAAE,iBAAiB,YAAY,EAAE,YAAY,SAAS,CAAC;IAG5F,+CAA+C;IAC/C,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,uBAAuB,cACzB,KAAK,CAAC,CAAA;QACH,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,kBAAkB,IAAI,4HAAA,CAAA,2BAAwB,CAAC;YACjD,MAAM,sBAAsB,IAAI;YAChC,WAAW;YACX,qBAAqB;QACzB;QACA,sIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,oBAAoB;IAC1C;AACR","debugId":null}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/tutor/tutor-form.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { aiTutoringTool, AiTutoringToolOutput } from \"@/ai/flows/ai-tutoring-tool\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Loader2, TimerIcon, Volume2, Paperclip, X, Send, Bot, User as UserIcon } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useUser, useFirestore, useCollection, useMemoFirebase } from \"@/firebase\";\nimport { collection, query, orderBy, limit } from 'firebase/firestore';\nimport { parseISO, format, isAfter } from 'date-fns';\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { cn } from \"@/lib/utils\";\nimport { updateProgress } from \"@/services/progress\";\n\ntype ChatMessage = {\n    role: 'user' | 'model';\n    question?: string;\n    explanation?: string;\n    example?: string;\n    explanationAudio?: string;\n    exampleAudio?: string;\n    fileDataUri?: string;\n    fileName?: string;\n}\n\nconst formSchema = z.object({\n  question: z.string().min(1, \"Please enter a question.\"),\n});\n\ntype FormData = z.infer<typeof formSchema>;\n\nfunction CountdownTimer({ duration }: { duration: number }) {\n    const [timeLeft, setTimeLeft] = useState(duration * 60);\n\n    useEffect(() => {\n        if (timeLeft <= 0) return;\n        const intervalId = setInterval(() => { setTimeLeft(timeLeft - 1); }, 1000);\n        return () => clearInterval(intervalId);\n    }, [timeLeft]);\n\n    const minutes = Math.floor(timeLeft / 60);\n    const seconds = timeLeft % 60;\n\n    return (\n        <div className=\"flex items-center gap-2 text-lg font-semibold text-primary\">\n            <TimerIcon className=\"h-5 w-5\" />\n            <span>{String(minutes).padStart(2, '0')}:{String(seconds).padStart(2, '0')}</span>\n        </div>\n    );\n}\n\nconst ChatBubble = ({ message }: { message: ChatMessage }) => {\n    const isUser = message.role === 'user';\n    const audioExplanationRef = useRef<HTMLAudioElement>(null);\n    const audioExampleRef = useRef<HTMLAudioElement>(null);\n\n    const playAudio = (ref: React.RefObject<HTMLAudioElement>) => {\n        ref.current?.play();\n    };\n    \n    return (\n        <div className={cn(\"flex items-start gap-4\", isUser ? \"justify-end\" : \"\")}>\n            {!isUser && (\n                <Avatar className=\"h-8 w-8\">\n                    <AvatarFallback><Bot /></AvatarFallback>\n                </Avatar>\n            )}\n            <div className={cn(\"max-w-md rounded-lg p-3\", isUser ? \"bg-primary text-primary-foreground\" : \"bg-muted\")}>\n                {isUser ? (\n                    <p>{message.question}</p>\n                ) : (\n                    <div className=\"space-y-4\">\n                        {message.explanation && (\n                            <div className=\"prose prose-sm\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h4 className=\"font-bold\">Explanation</h4>\n                                    {message.explanationAudio && (\n                                        <Button variant=\"ghost\" size=\"icon\" onClick={() => playAudio(audioExplanationRef)}>\n                                            <Volume2 className=\"h-4 w-4\" />\n                                        </Button>\n                                    )}\n                                </div>\n                                <p>{message.explanation}</p>\n                                <audio ref={audioExplanationRef} src={message.explanationAudio} className=\"hidden\" />\n                            </div>\n                        )}\n                         {message.example && (\n                            <div className=\"prose prose-sm\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h4 className=\"font-bold\">Example</h4>\n                                     {message.exampleAudio && (\n                                        <Button variant=\"ghost\" size=\"icon\" onClick={() => playAudio(audioExampleRef)}>\n                                            <Volume2 className=\"h-4 w-4\" />\n                                        </Button>\n                                    )}\n                                </div>\n                                <p>{message.example}</p>\n                                 <audio ref={audioExampleRef} src={message.exampleAudio} className=\"hidden\" />\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n             {isUser && (\n                <Avatar className=\"h-8 w-8\">\n                    <AvatarFallback><UserIcon /></AvatarFallback>\n                </Avatar>\n            )}\n        </div>\n    )\n}\n\nexport function TutorForm() {\n  const { user } = useUser();\n  const firestore = useFirestore();\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [fileDataUri, setFileDataUri] = useState<string | null>(null);\n  const [fileName, setFileName] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n  const [sessionStartTime, setSessionStartTime] = useState<Date | null>(null);\n\n\n  const studentProfilesQuery = useMemoFirebase(() => {\n    if (!user || !firestore) return null;\n    return collection(firestore, `users/${user.uid}/studentProfiles`);\n  }, [user, firestore]);\n\n  const { data: studentProfiles, isLoading: isLoadingProfiles } = useCollection(studentProfilesQuery);\n  const studentProfile = studentProfiles?.[0];\n\n  const studyPlanQuery = useMemoFirebase(() => {\n    if (!user || !firestore || !studentProfile) return null;\n    return query(\n        collection(firestore, `users/${user.uid}/studentProfiles/${studentProfile.id}/studyPlans`),\n        orderBy('createdAt', 'desc'),\n        limit(1)\n    );\n  }, [user, firestore, studentProfile]);\n\n  const { data: studyPlans, isLoading: isLoadingStudyPlans } = useCollection(studyPlanQuery);\n  const latestStudyPlan = studyPlans?.[0];\n\n  const nextSession = useMemoFirebase(() => {\n    if (!latestStudyPlan?.schedule) return null;\n    const now = new Date();\n    // Find the next session that is after the current time\n    return latestStudyPlan.schedule\n        .map(s => ({...s, dateTime: parseISO(`${s.date}T${s.time}`) }))\n        .sort((a, b) => a.dateTime.getTime() - b.dateTime.getTime())\n        .find(s => isAfter(s.dateTime, now));\n  }, [latestStudyPlan]);\n\n  const form = useForm<FormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: { question: \"\" },\n  });\n\n   useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n\n  \n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setFileDataUri(e.target?.result as string);\n        setFileName(file.name);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const removeFile = () => {\n    setFileDataUri(null);\n    setFileName(null);\n    if(fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  }\n\n  async function onSubmit(data: FormData) {\n     if (!studentProfile || !firestore || !user) {\n        toast({\n            variant: \"destructive\",\n            title: \"Profile Needed\",\n            description: \"Please complete your student profile first.\",\n        });\n        return;\n    }\n    \n    if (nextSession && !sessionStartTime) {\n        setSessionStartTime(new Date());\n    }\n\n    setIsLoading(true);\n\n    const userMessage: ChatMessage = {\n        role: 'user',\n        question: data.question,\n        ...(fileDataUri && { fileDataUri, fileName })\n    };\n    setChatHistory(prev => [...prev, userMessage]);\n\n    const historyForApi = chatHistory.map(msg => ({\n        role: msg.role,\n        content: msg.role === 'user' ? msg.question! : `${msg.explanation}\\n${msg.example}`\n    }))\n\n    try {\n      const result = await aiTutoringTool({\n        studentName: studentProfile.name,\n        gradeLevel: studentProfile.gradeLevel,\n        country: studentProfile.country,\n        preferredLearningLanguage: studentProfile.preferredLearningLanguage,\n        subject: latestStudyPlan?.subject || \"General\",\n        topic: nextSession?.topic || \"General Question\",\n        studyPlan: latestStudyPlan?.content,\n        fileDataUri: fileDataUri || undefined,\n        history: historyForApi,\n        question: data.question,\n      });\n\n      const modelMessage: ChatMessage = { role: 'model', ...result };\n      setChatHistory(prev => [...prev, modelMessage]);\n      form.reset();\n      removeFile();\n\n       // Update progress only if there was an active session for this interaction\n      if (user && firestore && studentProfile && latestStudyPlan && nextSession && sessionStartTime) {\n          updateProgress({\n              firestore,\n              userId: user.uid,\n              studentProfileId: studentProfile.id,\n              studyPlanId: latestStudyPlan.id,\n              studySessionId: nextSession.id,\n              sessionStartTime: sessionStartTime,\n          });\n      }\n\n\n    } catch (error) {\n      console.error(\"Error with AI Tutor:\", error);\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to get a response from the tutor. Please try again.\",\n      });\n      // Optionally remove the user's message if the API fails\n      setChatHistory(prev => prev.slice(0, prev.length -1));\n\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n\n  if (isLoadingProfiles || isLoadingStudyPlans) {\n    return (\n        <div className=\"p-6 text-center\">\n            <Loader2 className=\"mx-auto h-8 w-8 animate-spin text-primary\" />\n            <p className=\"mt-2 text-muted-foreground\">Loading your learning context...</p>\n        </div>\n    )\n  }\n\n  return (\n    <>\n      {nextSession ? (\n        <Card className=\"mb-6 bg-secondary/50\">\n            <CardHeader>\n                <div className=\"flex justify-between items-start\">\n                    <div>\n                        <CardTitle>Next Scheduled Session</CardTitle>\n                        <CardDescription>Your AI Professor is ready to help you with this topic.</CardDescription>\n                    </div>\n                    <CountdownTimer duration={nextSession.duration} />\n                </div>\n            </CardHeader>\n            <CardContent className=\"grid gap-2 text-sm\">\n                <div className=\"grid grid-cols-2\">\n                    <span className=\"font-semibold\">Topic:</span>\n                    <span>{nextSession.topic}</span>\n                </div>\n                 <div className=\"grid grid-cols-2\">\n                    <span className=\"font-semibold\">Subject:</span>\n                    <span>{latestStudyPlan?.subject}</span>\n                </div>\n                <div className=\"grid grid-cols-2\">\n                    <span className=\"font-semibold\">Time:</span>\n                    <span>{format(nextSession.dateTime, 'MMMM d, yyyy')} at {format(nextSession.dateTime, 'p')}</span>\n                </div>\n                <div className=\"grid grid-cols-2\">\n                    <span className=\"font-semibold\">Duration:</span>\n                    <span>{nextSession.duration} minutes</span>\n                </div>\n            </CardContent>\n        </Card>\n      ) : (\n         <Card className=\"mb-6\">\n            <CardHeader>\n              <CardTitle>No Upcoming Sessions</CardTitle>\n              <CardDescription>You can ask general questions, and your AI Professor will assist you.</CardDescription>\n            </CardHeader>\n        </Card>\n      )}\n\n      <Card className=\"flex flex-col h-[60vh]\">\n          <CardHeader>\n            <CardTitle>Chat with your Professor</CardTitle>\n          </CardHeader>\n          <CardContent ref={chatContainerRef} className=\"flex-1 overflow-y-auto space-y-4\">\n              {chatHistory.map((msg, index) => (\n                  <ChatBubble key={index} message={msg} />\n              ))}\n               {isLoading && (\n                    <div className=\"flex items-start gap-4\">\n                        <Avatar className=\"h-8 w-8\">\n                            <AvatarFallback><Bot /></AvatarFallback>\n                        </Avatar>\n                        <div className=\"max-w-md rounded-lg p-3 bg-muted\">\n                           <Loader2 className=\"h-5 w-5 animate-spin\" />\n                        </div>\n                    </div>\n                )}\n          </CardContent>\n          <div className=\"p-4 border-t\">\n            <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                    <FormField\n                    control={form.control}\n                    name=\"question\"\n                    render={({ field }) => (\n                        <FormItem>\n                            <FormControl>\n                                <div className=\"relative\">\n                                    <Textarea\n                                        placeholder={nextSession ? \"Ask a question about today's topic...\" : \"Ask a general question...\"}\n                                        rows={2}\n                                        className=\"pr-20\"\n                                        {...field}\n                                        onKeyDown={(e) => {\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                form.handleSubmit(onSubmit)();\n                                            }\n                                        }}\n                                    />\n                                    <div className=\"absolute bottom-2 right-2 flex items-center gap-2\">\n                                        <Button type=\"button\" size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 rounded-full hover:bg-transparent focus:bg-transparent\" onClick={() => fileInputRef.current?.click()}>\n                                            <Paperclip className=\"h-4 w-4\" />\n                                            <span className=\"sr-only\">Upload File</span>\n                                        </Button>\n                                        <Button type=\"submit\" size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 rounded-full hover:bg-transparent focus:bg-transparent\" disabled={isLoading || !studentProfile}>\n                                            <Send className=\"h-4 w-4\" />\n                                            <span className=\"sr-only\">Send</span>\n                                        </Button>\n                                    </div>\n                                </div>\n                            </FormControl>\n                            <FormMessage />\n                        </FormItem>\n                    )}\n                    />\n                    <input\n                        type=\"file\"\n                        ref={fileInputRef}\n                        onChange={handleFileChange}\n                        className=\"hidden\"\n                        accept=\"image/*,application/pdf,.doc,.docx,.txt\"\n                    />\n                    {fileName && (\n                        <div className=\"flex items-center gap-2 text-sm text-muted-foreground bg-secondary px-3 py-1.5 rounded-md w-fit\">\n                            <span>{fileName}</span>\n                            <Button type=\"button\" variant=\"ghost\" size=\"icon\" className=\"h-6 w-6 rounded-full hover:bg-transparent focus:bg-transparent\" onClick={removeFile}>\n                                <X className=\"h-4 w-4\"/>\n                            </Button>\n                        </div>\n                    )}\n                </form>\n            </Form>\n          </div>\n      </Card>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}